{% extends 'base.html.twig' %}

{% block title %}
    {{title_page}}
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{asset('assets/styles/general_backoffice.css')}}"> 
    <link rel="stylesheet" href="{{asset('assets/styles/btn_backoffice.css')}}"> 
    <link rel="stylesheet" href="{{asset('assets/styles/tables_backoffice.css')}}"> 
    <link rel="stylesheet" href="{{asset('assets/styles/pagination_backoffice.css')}}"> 
    <link rel="stylesheet" href="{{asset('assets/styles/sorts_backoffice.css')}}"> 
{% endblock %}

{% block header %}
{% include "partials/_header.html.twig" %}
{% include "partials/_nav_back.html.twig" %}
{% endblock %}

{% block body %}
<div class="container">
    <h1>{{ h1_index }}</h1>
        {% for message in app.flashes('success') %}
    <div class="pop-up-good">
            {{ message }}
    </div>
        {% endfor %}
    <h2 class="list-vehicles">{{ h2_index }}</h2>
    <a href="{{ path('app_avis_new') }}" id="avis_submit">{{ add_btn }}</a>
    <div class="count">
        {{ count_vehicles }} {{ avis.getTotalItemCount }}
    </div>
    <table>
        <thead>
            <tr>
                <th class="th-date">{{ td_date }}<a id="sortDate"><img src="{{asset('assets/img/descending_white.png')}}" alt="filtre"></a></th>
                <th class="th-lastname">{{ td_lastname }}<a id="sortlastname"><img src="{{asset('assets/img/descending_white.png')}}" alt="filtre"></a></th>
                <th class="th-firstname">{{ td_firstname }}<a id="sortfirstname"><img src="{{asset('assets/img/descending_white.png')}}" alt="filtre"></a></th>
                <th class="th-rank">{{ td_rank }}<a id="sortRank"><img src="{{asset('assets/img/descending_white.png')}}" alt="filtre"></a></th>
                <th class="th-message">{{ td_message }}</th>
                <th class="th-appr"></th>
                <th class="th-supr"></th>
                
            </tr>
        </thead>
        <tbody>
            {% for avi in avis %}
            <tr>
                <td class="td-date">{{ avi.date|date('d-m-Y') }}</td>
                <td class="td-lastname">{{ avi.lastname}}</td>
                <td class="td-firstname">{{ avi.firstname }}</td>
                <td class="td-rank">{{ avi.rank }}</td>
                <td class="td-message">{{ avi.message}}</td>
                {% if avi.approve == 1 %}
                    <td class="td-desappr"><a href="{{ path('app_avis_desapprove', {id: avi.id }) }}" class="btn-desappr">{{ td_desappr }}</a></td>
                {% else %}
                    <td class="td-appr"><a href="{{ path('app_avis_approve', {id: avi.id }) }}" class="btn-appr">{{ td_approve }}</a></td>
                {% endif %}
                <td class="td-supr"><a href="{{ path('app_avis_delete', {id: avi.id }) }}" class="btn-delete">{{ td_delete }}</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div>
        {{ knp_pagination_render(avis) }}
    </div>
</div>
{% endblock %}

{% block javascripts %}
    <script src="{{asset('assets/js/sort_backoffice.js')}}"></script>
{% endblock %}

