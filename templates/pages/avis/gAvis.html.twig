{% extends 'base.html.twig' %}

{% block title %}
    {{title_page}}
{% endblock %}

{% block stylesheets %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="{{asset('assets/styles/gen.css')}}">
{% endblock %}

{% block header %}
    {% include "partials/_header.html.twig" %}
    {% include "partials/_nav_back.html.twig" %}
{% endblock %}

{% block body %}
<div class="container">
    <h1>{{ h1_index }}</h1>
    {% for message in app.flashes('success') %}
    <div class="alert alert-success w-100 mx-auto my-4 rounded-0 text-center">
        {{ message }}
    </div>
    {% endfor %}
    <div class="d-flex justify-content-center my-4">
        <a href="{{ path('app_registration') }}" class="btn btn-primary w-50 rounded-0" id="addemployee_submit">{{ add_btn }}</a>
    </div>
    <div class="count d-flex justify-content-center w-25 my-4 mx-auto fs-5">
        {{ count_vehicles }} {{ avis.getTotalItemCount }}
    </div>
    <table class="table table-striped d-none d-md-table">
        <thead>
            <tr>
                <th class="th-date ml-3">{{ td_date }}
                    <a id="sortDate">
                        <svg 
                            xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink"
                            width="22px" height="20px">
                            <image  x="0px" y="0px" width="22px" height="20px"  xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAUCAMAAAC+oj0CAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAdVBMVEUAAACjJCSjIyOjJCSjIyOiIiKkJCSjIyOjIyOkJCSjJCSkIiKjJCSkJCSiJCSjIyOlIiKiIyOjIyOiIyOiIyOiIyOjICCjIyOkIiKiJCSjIyOjJCSjIyOiJyejIyOiIyOkJSWjIyOiIyOjIyOhIiKjIyP///+8EYF0AAAAJXRSTlMAVvzS01gcgoiIiFqAgFWAWoJW0syHJ9qGj6fm5SGF6CrS/IsmhJnNMwAAAAFiS0dEJloImLUAAAAHdElNRQfnCw0MCy3tHhSMAAAAh0lEQVQY05WQiQ6DIAyG64UFnM5zl5u7+v6vaBGNhhg3PxISvpRCf/B8mgkAIIx4AxGjRDUsiZoFJbAGHXbpZFMH0z/8dNCZ1UdEZcBcbDXJdukf4xQ2ltLRIpYmEv3XOEuqmnVzSh19pgtdb+3dLX/w291zPLyI3uPFD7XfqUYraQNhItOhBybXC2/0rGqUAAAAAElFTkSuQmCC" />
                        </svg>
                    </a>
                </th>
                <th class="th-lastname">{{ td_lastname }}
                    <a id="sortlastname">
                        <svg 
                            xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink"
                            width="22px" height="20px">
                            <image  x="0px" y="0px" width="22px" height="20px"  xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAUCAMAAAC+oj0CAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAdVBMVEUAAACjJCSjIyOjJCSjIyOiIiKkJCSjIyOjIyOkJCSjJCSkIiKjJCSkJCSiJCSjIyOlIiKiIyOjIyOiIyOiIyOiIyOjICCjIyOkIiKiJCSjIyOjJCSjIyOiJyejIyOiIyOkJSWjIyOiIyOjIyOhIiKjIyP///+8EYF0AAAAJXRSTlMAVvzS01gcgoiIiFqAgFWAWoJW0syHJ9qGj6fm5SGF6CrS/IsmhJnNMwAAAAFiS0dEJloImLUAAAAHdElNRQfnCw0MCy3tHhSMAAAAh0lEQVQY05WQiQ6DIAyG64UFnM5zl5u7+v6vaBGNhhg3PxISvpRCf/B8mgkAIIx4AxGjRDUsiZoFJbAGHXbpZFMH0z/8dNCZ1UdEZcBcbDXJdukf4xQ2ltLRIpYmEv3XOEuqmnVzSh19pgtdb+3dLX/w291zPLyI3uPFD7XfqUYraQNhItOhBybXC2/0rGqUAAAAAElFTkSuQmCC" />
                        </svg>
                    </a>
                </th>
                <th class="th-firstname">{{ td_firstname }}
                    <a id="sortfirstname">
                        <svg 
                            xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink"
                            width="22px" height="20px">
                            <image  x="0px" y="0px" width="22px" height="20px"  xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAUCAMAAAC+oj0CAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAdVBMVEUAAACjJCSjIyOjJCSjIyOiIiKkJCSjIyOjIyOkJCSjJCSkIiKjJCSkJCSiJCSjIyOlIiKiIyOjIyOiIyOiIyOiIyOjICCjIyOkIiKiJCSjIyOjJCSjIyOiJyejIyOiIyOkJSWjIyOiIyOjIyOhIiKjIyP///+8EYF0AAAAJXRSTlMAVvzS01gcgoiIiFqAgFWAWoJW0syHJ9qGj6fm5SGF6CrS/IsmhJnNMwAAAAFiS0dEJloImLUAAAAHdElNRQfnCw0MCy3tHhSMAAAAh0lEQVQY05WQiQ6DIAyG64UFnM5zl5u7+v6vaBGNhhg3PxISvpRCf/B8mgkAIIx4AxGjRDUsiZoFJbAGHXbpZFMH0z/8dNCZ1UdEZcBcbDXJdukf4xQ2ltLRIpYmEv3XOEuqmnVzSh19pgtdb+3dLX/w291zPLyI3uPFD7XfqUYraQNhItOhBybXC2/0rGqUAAAAAElFTkSuQmCC" />
                        </svg>
                    </a>
                </th>
                <th class="th-rank">{{ td_rank }}<a id="sortRank">
                    <svg 
                        xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink"
                        width="22px" height="20px">
                        <image  x="0px" y="0px" width="22px" height="20px"  xlink:href="data:img/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAUCAMAAAC+oj0CAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAdVBMVEUAAACjJCSjIyOjJCSjIyOiIiKkJCSjIyOjIyOkJCSjJCSkIiKjJCSkJCSiJCSjIyOlIiKiIyOjIyOiIyOiIyOiIyOjICCjIyOkIiKiJCSjIyOjJCSjIyOiJyejIyOiIyOkJSWjIyOiIyOjIyOhIiKjIyP///+8EYF0AAAAJXRSTlMAVvzS01gcgoiIiFqAgFWAWoJW0syHJ9qGj6fm5SGF6CrS/IsmhJnNMwAAAAFiS0dEJloImLUAAAAHdElNRQfnCw0MCy3tHhSMAAAAh0lEQVQY05WQiQ6DIAyG64UFnM5zl5u7+v6vaBGNhhg3PxISvpRCf/B8mgkAIIx4AxGjRDUsiZoFJbAGHXbpZFMH0z/8dNCZ1UdEZcBcbDXJdukf4xQ2ltLRIpYmEv3XOEuqmnVzSh19pgtdb+3dLX/w291zPLyI3uPFD7XfqUYraQNhItOhBybXC2/0rGqUAAAAAElFTkSuQmCC" />
                    </svg>
                </a></th>
                <th class="th-message w-25">{{ td_message }}</th>
                <th class="th-appr"></th>
                <th class="th-supr"></th>
            </tr>
        </thead>
        <tbody>
            {% for avi in avis %}
            <tr>
                <td class="td-date">{{ avi.date|date('d-m-Y') }}</td>
                <td class="td-lastname">{{ avi.lastname}}</td>
                <td class="td-firstname">{{ avi.firstname }}</td>
                <td class="td-rank">{{ avi.rank }}</td>
                <td class="td-message">{{ avi.message}}</td>
                {% if avi.approve == 1 %}
                    <td class="td-desappr text-center"><a href="{{ path('app_avis_desapprove', {id: avi.id }) }}" class="btn btn-warning text-center rounded-0">{{ td_desappr }}</a></td>
                {% else %}
                    <td class="td-appr text-center"><a href="{{ path('app_avis_approve', {id: avi.id }) }}" class="btn btn-success text-center rounded-0">{{ td_approve }}</a></td>
                {% endif %}
                <td class="td-supr text-center"><a href="{{ path('app_avis_delete', {id: avi.id }) }}" class="btn btn-danger rounded-0">{{ td_delete }}</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% for avi in avis %}
    <div class="card my-4 w-75 mx-auto d-md-none">
        <div class="card-header">{{ avi.lastname}} {{ avi.firstname }}</div>
        <div class="card-body">
            <h5 class="card-title">{{avi.date|date('d-m-Y')}}</h5>
            <p class="card-text">Note : {{avi.rank}}</p>
            <p class="card-text">{{avi.message}}</p>
            <div class="d-flex justify-content-between">
                <a href="{{ path('app_avis_delete', {id: avi.id }) }}" class="btn btn-danger rounded-0">{{ td_delete }}</a>
                {% if avi.approve == 1 %}
                    <a href="{{ path('app_avis_desapprove', {id: avi.id }) }}" class="btn btn-warning text-center rounded-0">{{ td_desappr }}</a>
                {% else %}
                    <a href="{{ path('app_avis_approve', {id: avi.id }) }}" class="btn btn-success text-center rounded-0">{{ td_approve }}</a>
                {% endif %}
            </div>
        </div>
    </div>
    {% endfor %}
    <div>
        {{ knp_pagination_render(avis) }}
    </div>
</div>
<script src="{{asset('assets/scripts/sort.js')}}"></script>
{% endblock %}


